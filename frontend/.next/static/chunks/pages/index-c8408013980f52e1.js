(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3454:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(7663)},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(163)}])},163:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(5893),n=r(7294);function a(e){let{onSearch:t}=e,[r,a]=(0,n.useState)("");return(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault();let s=r.trim();s&&t(s)},className:"w-full max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{value:r,onChange:e=>a(e.target.value),placeholder:"What are you buying?",className:"flex-1 px-4 py-3 rounded-xl bg-[#0f1624] border border-white/10 text-white outline-none"}),(0,s.jsx)("button",{className:"px-5 py-3 rounded-xl bg-cyan-400 text-[#0b0f1a] font-bold",children:"Search"})]})})}function l(e){let{title:t,bestPrice:r,originalPrice:n,savingsAmount:a,savingsPercent:l,buyUrl:i}=e,c=!!i&&/^https?:\/\//.test(i);return(0,s.jsxs)("div",{className:"relative p-6 rounded-2xl bg-white/5 border border-white/10",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 bg-cyan-400 text-[#0b0f1a] text-xs font-bold px-3 py-1 rounded-bl-xl",children:"BEST PRICE"}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-white rounded-xl flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-black font-bold",children:"\uD83D\uDECD️"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-white line-clamp-1",children:t}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-green-400",children:["₹",r.toLocaleString("en-IN")]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["₹",n.toLocaleString("en-IN")]})]}),(0,s.jsxs)("div",{className:"inline-block mt-2 text-xs font-semibold text-green-400 bg-green-400/10 px-2 py-1 rounded",children:["Save ₹",a.toLocaleString("en-IN")," (",l,"%)"]})]})]}),c?(0,s.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",className:"block w-full mt-6 bg-cyan-400 hover:bg-cyan-300 text-[#0b0f1a] font-bold py-3 rounded-xl text-center",children:"Buy Now →"}):(0,s.jsx)("button",{disabled:!0,className:"block w-full mt-6 bg-gray-600 text-white font-bold py-3 rounded-xl text-center cursor-not-allowed",children:"Buy Now →"})]})}function i(e){let{insight:t,score:r}=e,a=Math.max(0,Math.min(100,Math.round(r))),l=220-220*a/100;return(0,n.useEffect)(()=>{},[a]),(0,s.jsxs)("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"text-purple-400 text-xl",children:"✨"}),(0,s.jsx)("h4",{className:"font-bold text-purple-200",children:"Gemini Insight"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed flex-grow",children:t||"Analyzing market trends..."}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"relative w-20 h-20",children:[(0,s.jsxs)("svg",{className:"rotate-[-90deg]",width:"80",height:"80",children:[(0,s.jsx)("circle",{cx:"40",cy:"40",r:"35",stroke:"rgba(255,255,255,0.1)",strokeWidth:"6",fill:"none"}),(0,s.jsx)("circle",{cx:"40",cy:"40",r:"35",stroke:a>=70?"#00ff9d":a>=40?"#ffd166":"#ff4d4d",strokeWidth:"6",strokeLinecap:"round",fill:"none",strokeDasharray:220,strokeDashoffset:l})]}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center font-bold text-xl",children:a})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"Deal Score"})]})]})]})}function c(e){let{listings:t}=e,r=[...t].sort((e,t)=>e.price-t.price);return(0,s.jsxs)("div",{className:"rounded-2xl overflow-hidden bg-white/5 border border-white/10",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/5 bg-white/5 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"font-bold",children:"Price Comparison"}),(0,s.jsx)("button",{className:"text-sm text-gray-400 hover:text-cyan-400",children:"Save Search"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-xs text-gray-500 uppercase border-b border-white/5",children:[(0,s.jsx)("th",{className:"p-4",children:"Store"}),(0,s.jsx)("th",{className:"p-4",children:"Price"}),(0,s.jsx)("th",{className:"p-4 hidden sm:table-cell",children:"Delivery"}),(0,s.jsx)("th",{className:"p-4 hidden sm:table-cell",children:"Rating"}),(0,s.jsx)("th",{className:"p-4",children:"Action"})]})}),(0,s.jsx)("tbody",{className:"text-sm",children:r.map((e,t)=>{let r=0===t,n=!!e.url&&/^https?:\/\//.test(e.url);return(0,s.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 ".concat(r?"bg-green-400/5":""),children:[(0,s.jsxs)("td",{className:"p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFEC"})}),(0,s.jsx)("span",{className:"font-medium ".concat(r?"text-green-400":"text-gray-300"),children:e.platform}),r&&(0,s.jsx)("span",{className:"text-[10px] bg-green-400 text-black px-1.5 rounded font-bold ml-2",children:"LOWEST"})]}),(0,s.jsxs)("td",{className:"p-4 font-bold",children:["₹",e.price.toLocaleString("en-IN")]}),(0,s.jsx)("td",{className:"p-4 text-gray-400 hidden sm:table-cell text-sm",children:e.delivery||"Free Delivery"}),(0,s.jsx)("td",{className:"p-4 hidden sm:table-cell",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-yellow-400",children:[(0,s.jsx)("span",{className:"text-sm text-white",children:e.rating||"4.3"})," ",(0,s.jsx)("span",{className:"text-xs",children:"★"})]})}),(0,s.jsx)("td",{className:"p-4",children:n?(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"text-cyan-400 text-sm font-medium hover:underline",children:"View ↗"}):(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"Unavailable"})})]},"".concat(e.platform,"-").concat(t))})})]})})]})}var o=r(3454);async function d(e,t){try{let r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.text();return{ok:!1,error:e||"HTTP ".concat(r.status)}}if(!(r.headers.get("content-type")||"").includes("application/json")){let e=await r.text();return{ok:!1,error:"Non-JSON response: ".concat(e.slice(0,120))}}let s=await r.json();return{ok:!0,data:s}}catch(e){return{ok:!1,error:(null==e?void 0:e.message)||"Network error"}}}async function x(e){try{let t=await fetch(e);if(!t.ok){let e=await t.text();return{ok:!1,error:e||"HTTP ".concat(t.status)}}if(!(t.headers.get("content-type")||"").includes("application/json")){let e=await t.text();return{ok:!1,error:"Non-JSON response: ".concat(e.slice(0,120))}}let r=await t.json();return{ok:!0,data:r}}catch(e){return{ok:!1,error:(null==e?void 0:e.message)||"Network error"}}}function h(){var e;let[t,r]=(0,n.useState)(!1),[h,u]=(0,n.useState)(null),[m,f]=(0,n.useState)(null),[p,g]=(0,n.useState)(""),[b,v]=(0,n.useState)(0);async function j(e){r(!0),u(null),g(""),v(0);try{let r=function(){let e=new URLSearchParams(window.location.search),t=null==e?void 0:e.get("apiBaseUrl"),r=o.env.NEXT_PUBLIC_API_BASE_URL;return t||r||"https://smartprice-ai.onrender.com"}(),s=await x("".concat(r,"/api/search?q=").concat(encodeURIComponent(e)));if(!s.ok||!s.data)throw Error(s.error||"Search failed");let n=s.data;f(n);let a=await d("".concat(r,"/api/chat-advice"),{query:e,data:n,context:"analysis"});if(a.ok&&a.data){var t;let e=a.data.verdict||a.data.reply||"",r=null!==(t=a.data.score)&&void 0!==t?t:70;g(e),v(r)}else g("This looks like a solid deal based on current market data."),v(85)}catch(e){u((null==e?void 0:e.message)||"Search failed")}finally{r(!1)}}let N=m?Math.max(0,Math.floor((m.originalPrice||0)-(m.bestPrice||0))):0,y=m&&m.originalPrice?Math.floor((m.originalPrice-m.bestPrice)/m.originalPrice*100):0,w=m&&Array.isArray(m.listings)&&m.listings.length?null===(e=[...m.listings].sort((e,t)=>(e.price||0)-(t.price||0)).find(e=>e.url&&/^https?:\/\//.test(e.url||"")))||void 0===e?void 0:e.url:void 0;return(0,s.jsx)("div",{className:"min-h-screen bg-[#0b0f1a] text-white",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"SmartPrice India"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Compare prices, get AI advice, and save money."})]}),(0,s.jsx)(a,{onSearch:j}),t&&(0,s.jsx)("div",{className:"mt-10 text-center text-cyan-400",children:"Finding the best prices..."}),h&&!t&&(0,s.jsxs)("div",{className:"mt-6 text-center text-red-400",children:["Error: ",h]}),m&&!t&&(0,s.jsxs)("div",{className:"mt-10 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)(l,{title:m.title,bestPrice:m.bestPrice,originalPrice:m.originalPrice,savingsAmount:N,savingsPercent:y,buyUrl:w}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(i,{insight:p,score:b})})]}),m&&!t&&(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(c,{listings:m.listings})})]})})}},7663:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var c=[],o=!1,d=-1;function x(){o&&s&&(o=!1,s.length?c=s.concat(c):d=-1,c.length&&h())}function h(){if(!o){var e=i(x);o=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,o=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new u(e,t)),1!==c.length||o||i(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},l=!0;try{t[e](a,a.exports,s),l=!1}finally{l&&delete r[e]}return a.exports}s.ab="//";var n=s(229);e.exports=n}()}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);